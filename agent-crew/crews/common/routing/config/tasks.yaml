routing_task:
  description: >
    **[당신의 임무]**
    학생의 이메일 내용을 분석하고, 가용한 도구를 사용하여 조직 데이터를 조회한 뒤, 가장 적합한 담당자를 찾아 배정하세요.

    **[입력 데이터]**
    - 이메일 요약: {email_summary}
    - 이메일 본문: {body}
    
    **[필수 수행 절차 (Workflow)]**
    1. **데이터 확보 (Data Acquisition):**
       - 제공된 도구들을 활용하여 필요한 부서나 담당자의 정보를 조회하세요.
       - 만약 첫 번째 조회 결과가 비어있거나 불충분하다면, 다른 검색어를 시도하거나 추가 도구를 사용할 수 있습니다.
    
    2. **데이터 유무 확인 및 모드 전환 (Critical Step):**
       - **중요:** 도구 실행 결과로 **직원 목록이나 업무 분장 데이터가 반환되었다면, 즉시 도구 사용을 멈추고 분석 단계로 넘어가야 합니다.**
       - 이미 데이터를 확보한 상태에서 동일한 도구를 반복해서 호출하는 것은 엄격히 금지됩니다.

    3. **매핑 및 추론 (Mapping & Reasoning):**
       - 확보된 데이터 내의 '담당 업무(duties)' 텍스트와 이메일의 '요구사항'을 대조하세요.
       - 단순히 키워드가 일치하는 것을 넘어, 문맥상 해당 업무를 처리할 수 있는 사람을 선택하세요.

    4. **검증 및 반환 (Validation):**
       - 선택한 담당자가 왜 적임자인지 논리적 근거(Reasoning)를 작성하고, 확신 수준(Confidence)을 평가하여 결과를 반환하세요.
    
  expected_output: >
    `RoutingResult` JSON 포맷. 
    반드시 'matched_duty_description', 'duty_validation_reasoning', 'confidence_score'를 포함하세요.
  agent: email_routing_agent